using AdventOfCode.Utils;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace AdventOfCode.Year2019
{


    class Day20
    {
        #region Input
        const string Input = @"
                                       Z       C       Q   C             O   H                                       
                                       F       Z       K   B             Y   F                                       
  #####################################.#######.#######.###.#############.###.#####################################  
  #...#.#.........#.....#.#...........#.#...#.....#.......#...#...#.........#.....#...........#.#.#.#.#.....#.....#  
  ###.#.#####.###.#.###.#.#########.#.#.###.###.#####.#####.#.###.#.#######.###.#####.#########.#.#.#.#.#######.###  
  #.#.....#...#.......#.....#.#.....#.#.......#...#.....#...#...#.....#...#.#.....................................#  
  #.#.###########.#.###.###.#.#####.#.#.#.#.#####.#.#.###.#.#######.#.#.#.###.###.#.#########.#.#.#.#.###.#####.#.#  
  #...#.....#.....#.#.....#...#.....#.#.#.#.#...#.#.#.#...#.......#.#...#.#...#...#.#.......#.#.#.#.#.#.#...#...#.#  
  ###.#.#######.#.#########.#.#####.#.###.#####.#.#.###########.#########.#.#.#####.#.#########.###.###.#########.#  
  #.........#...#.#...#.#...#.......#.#...#.......#.......#.#.#...#.#...#.#.#...#.#.#...#.#.#.#.#.#.#...#.......#.#  
  ###.#.#.#####.#.#.###.###########.#.#.#.#.#############.#.#.#.###.#.#.#.#####.#.###.###.#.#.###.###.#######.#####  
  #.#.#.#...#.#.#.#...#...#.#...#.#.#...#.#.#...#.........#...#...#...#...#.............................#.#...#.#.#  
  #.#.###.#.#.#######.###.#.###.#.#.#.#####.#.###.#.###.###.#.###.#.#.#.###.###.#####.#.#.#####.#########.###.#.#.#  
  #.#.#...#.#...#.....#.#...........#...#...#.#...#.#...#.#.#.....#.#.#...#.#.......#.#.#...#.......#.#.#.....#.#.#  
  #.#.#.#####.#######.#.#.#####.#.#.#######.#.#####.#.#.#.#.###.###.#.#.###.#.#####.###.#######.#.###.#.###.#.#.#.#  
  #...#.#.....#.......#.#.#...#.#.#.......#.....#.#.#.#.#...#.....#.#.#.#...#.....#.#.......#...#.#...#.#...#.#...#  
  #.#.#####.#####.###.#.#####.#####.###.###.#.###.#.#####.#.###.###.#######.#####.###########.#.#####.#.###.###.###  
  #.#.........#...#...#...#...#...#...#...#.#.#.......#.#.#...#.#.#...#.#.......#...#.......#.#.#.#.....#.........#  
  ###.###############.###.###.###.#.#.#.#####.#####.###.#####.#.#.###.#.#####.###.#.#.#####.#####.###.#######.#####  
  #.#.#.....#.....#.................#.#.#.....#...#...#.#.#...#.#.#.#...#.......#.#.......#.#.#...#...#...#.#.....#  
  #.#.###.#.###.#.###.#######.###.#.#########.#.#.#.###.#.#.#####.#.#.#######.#########.#####.#.#####.#.###.#.#.###  
  #...#.#.#.#.#.#.....#.......#...#.#...#...#...#.#...#...........#.........#.#.#.....#...#...#.#...#.#.#.#.#.#.#.#  
  ###.#.#.###.#######.#####.#######.#.#.###.#####.#.#############.#.###.#####.#.###.#######.###.###.#.#.#.#.#.###.#  
  #.#...#...#...#.#...#.#...#...#.....#.#.........#...#.#.........#.#.......#...........#...#...#.#.#.....#.#.#...#  
  #.#.#.###.###.#.#####.#.#####.#####.#####.#######.###.#.#.#######.###.#####.#####.#######.#.###.#.#.#.###.#.###.#  
  #...#.#.#.#...#...#...#.#...#.#.#.....#...#...#.......#.#.......#...#...#.#.#.#.#.....#...#.....#...#.#.....#.#.#  
  #.#.###.#.#.#####.###.###.###.#.#.#.###.#.#.#.###.#############.###.#####.#.#.#.#########.#.#.#####.###.#####.#.#  
  #.#.#...#.#.....#...#.....#.......#.#...#...#...#.#.....#.#.....#...#.#.......#...#...#...#.#...#.#...#...#.#.#.#  
  #.###.###.#.#####.###.###.###.###.###.#########.#.#.#.###.#.###.#.###.###.#.###.###.#####.#.#.###.###.#.#.#.#.#.#  
  #...#.#...#...#.#...#.#...#...#.....#.#.........#...#...#.....#.#.......#.#.......#.......#.#.#.#.#.....#.#.....#  
  #.###.#.###.###.#.#######.#######.#######.###########.#######.#######.###.###########.###.###.#.#.#####.###.#.#.#  
  #...#.....#.#.#.#.....#...#.#    N       M           B       H       Q   Z          #...#.....#.#.#.....#...#.#.#  
  ###.#.#####.#.#.#.#.#.###.#.#    L       T           F       F       K   F          #####.###.#.#.#####.#######.#  
  #...............#.#.#.#.#...#                                                       #.#...#...#.#...#.......#....HL
  ###.###.#####.###.#####.#.#.#                                                       #.###.#####.###.#####.#####.#  
VR......#...#.........#...#.#.#                                                     RF......#.........#...#...#...#  
  ###.#######.#####.###.#####.#                                                       #.#.#########.#####.#.#.#.###  
  #.#...#.....#...#.#...#.....#                                                       #.#...................#...#.#  
  #.#########.#.#.###.#.#.#.#.#                                                       ###########################.#  
  #...#.#.......#.....#...#.#..PQ                                                   BO....#...........#.....#.#...#  
  ###.#.#######################                                                       ###.#.#####.#.###.###.#.#.#.#  
OS....#.......................#                                                       #.......#.#.#.......#.....#..FS
  ###.#.###########.#.###.###.#                                                       #########.#############.#.###  
  #...#...#...#.#...#.#.#.#.#..GW                                                     #.....#.....#.#...#...#.#.#..FV
  #.#####.#.#.#.###.#.#.###.#.#                                                       #.###.#.###.#.#.#.#.#######.#  
  #.#...#...#.....#.#.......#.#                                                       #.#.#...#.......#...#.....#.#  
  #.#.#.#######.#####.#####.###                                                       #.#.#.#.###.#.###.###.#.#.#.#  
  #...#...........#.#.#.#.#.#.#                                                     CB....#.#.#...#.#...#...#.#...#  
  ###############.#.###.#.###.#                                                       #.#######.#####.###.#.#####.#  
  #.....#.......#...#...#.....#                                                       #.#.#...#...#.......#.....#.#  
  #.#.#.#.#####.#.#####.#####.#                                                       ###.###.###############.#####  
HP..#.#.....#...#.#.#.#.....#.#                                                       #...#.................#.#...#  
  #####.#####.#####.#.#.#####.#                                                       #.#####.#.###.#.###.#####.###  
  #.#...#.#...#.......#...#...#                                                     GY........#...#.#.#.#.........#  
  #.#.###.#.###.#.###.#.###.###                                                       #.###.#.#######.#.#.###.###.#  
  #.#.#.........#.#............KD                                                     #...#.#.#.#.#.#...#.#.#.#...#  
  #.#####.#####.###########.###                                                       #########.#.#.#.#.###.#.#####  
FR......#.#...#...#...#...#...#                                                       #.#.....#.#...#.#...#........BF
  #.###.#.#.#####.#.###.#.#####                                                       #.#.#####.#.#########.#######  
  #...#.#.#.....#...#...#.....#                                                     HL..#...#.#...#...#.#.#.#.#....PM
  ###.###.#.#########.#######.#                                                       #.#.###.#.#.###.#.#.###.###.#  
  #.....#.#...#.....#.....#.#..PM                                                     #...#.....#.#.#.......#......GW
  #.#######.#####.#.#####.#.###                                                       #.#.#.#.###.#.#.###.#####.###  
  #...............#.........#.#                                                     FV..#...#.#.......#...........#  
  #########.#.#####.#.#.#####.#                                                       ###########.#################  
  #...#.#...#.#...#.#.#...#...#                                                       #.#...#...#.#...#.#...#......SN
  #.#.#.###.#.###.#.#######.#.#                                                       #.#.#####.#####.#.#.#.#.#####  
AA..#...#.#.#.#.#.....#.#...#..MS                                                   HP........#.....#.....#.#.#...#  
  #.#.###.#####.#.###.#.#.###.#                                                       ###.#.###.#.###.#.#.#.#.###.#  
  #.#.....#.#.#.#...#.#.....#.#                                                       #...#...#.#.#...#.#.#.#...#.#  
  #.###.###.#.#.###########.#.#                                                       #.#########.###.#####.###.###  
NL..#.......................#.#                                                       #...............#...........#  
  #############.#.###.#.#.#####                                                       #########.#.#######.#########  
  #.#.........#.#...#.#.#.#...#                                                     FS..#.#...#.#...#...#.#.#...#..QR
  #.###.###.###.###########.#.#                                                       #.#.###.#########.###.#.#.#.#  
AE..#...#...#.#.#...#.......#.#                                                       #...#.....#...#.......#.#.#.#  
  #.#.#####.#.###.#####.#####.#                                                       #.#.###.###.#.#####.#.#.#.#.#  
  #.#.#.........#...#.#.#.....#                                                       #.#.#...#.#.#.#.#.#.#.#.#.#.#  
  #.#.#####.#.#.#.###.#.#.#####                                                       #.#####.#.#.###.#.#.#.#.#.#.#  
  #.......#.#.#.........#......FR                                                     #...................#...#...#  
  ###.#.#.#.###.###.#.###.#.###                                                       #.#.###.#.#.###.###.#.###.###  
  #...#.#.#.#.....#.#...#.#...#                                                       #.#.#...#.#...#.#...#.#.....#  
  ###.###.###.#########.#.#.#.#        C       Q   O         A   V       S       O    #.#.#####.#############.#####  
  #.....#.#.........#...#.#.#.#        Z       R   S         E   R       N       Y    #.#.....#.....#.#...........#  
  #.#.#.###.#.#.###.#.#.#.#.###########.#######.###.#########.###.#######.#######.#####.#.#.###.#####.###.#.#.#####  
  #.#.#...#.#.#.#...#.#.#.#.#.#.....#...#.#.....#.........#.....#...#.#.........#...#.#.#.#.#.......#...#.#.#.#.#.#  
  #.###.#########.#.###.#####.###.#.###.#.###.#.#.#####.#######.#.###.#.###.#####.###.#####.###.#.###.#####.###.#.#  
  #...#.#.......#.#...#.#.......#.#...#...#.#.#.#.....#.#.......#.#.#.#.#.....#.......#.#.#...#.#.........#.......#  
  #.#.#.#.###.#####.#.#.###.###.#.###.#.#.#.###.###.###########.#.#.#.#####.#.#.#######.#.###.#.###.###.#.###.#.###  
  #.#.#.....#.#...#.#.#.#...#...#.#...#.#.#.....#.........#...#.#.#.#.#.....#.#...#.#...#.#.#.#.#.....#.#.#...#.#.#  
  #.###########.###############.#.#.###.#####.#.#.#.#####.#.#.#.#.#.#.###.###.###.#.###.#.#.#.#.#.#.#.###.###.#.#.#  
  #...............#.#...#.#.#.#...#.......#...#.#.#.#.#.#.#.#...#.......#...#...#.........#...#.#.#.#...#...#.#...#  
  ###.#.###.###.#.#.#.#.#.#.#.###.###.###.#####.#.###.#.#######.###.#########.#.#.###.#.#.###.#.#.###.#.#.###.#.###  
  #.#.#...#.#.#.#...#.#.....#...#...#.#.#.#.....#.......#.....#.#...#.#.#.....#.#.#.#.#.#.#...#.#.#...#.#.#.#.#...#  
  #.#.#####.#.#############.#.###.#####.###.###.#.###.#######.#.#.###.#.#.#######.#.###.#####.#.###.#.#.###.###.###  
  #.#...#...........#...#...........#.#...#.#...#...#...#.......#.....#.........#...#.#.#.#.#.#.#...#.#.#.........#  
  #.#.###.###.#########.#.###.###.###.###.###.###.#.#########.#.#.#######.#.#.###.###.#.#.#.#.#.#.#.#########.#####  
  #.....#.#.......#.#.#.....#.#.#.#...#...#.#...#.#.#.....#...#.#.#.#...#.#.#...#.....#.....#.#.#.#.....#.......#.#  
  ###.#.#####.#####.#.#.#######.#.#.#.###.#.###.#.###.#.#######.#.#.#.#######.###.###.#######.###.#.#.###.#.#.###.#  
  #.#.#.#.......#...#...#...#.....#.#.........#.#.#...#.#.#.#.#.#.#...#.#.....#.#.#.........#.#.#.#.#...#.#.#.....#  
  #.###.###.#.#.###.#######.#.###.#######.###.#.#.###.###.#.#.#.#.#.#.#.#.#.#.#.#.###.#.#######.#.#############.#.#  
  #.......#.#.#.#.#.#.#...#.#.#.......#...#.#...#.......#.......#...#.#.#.#.#.#.#...#.#.#...#...#.#.#.#...#.....#.#  
  #.#.#####.#.#.#.#.#.###.#.#####.#####.#.#.#########.#####.#.#######.#.#####.#.#.#########.#.#####.#.#.#######.###  
  #.#.#.....#.#.#.........#.#.........#.#.....#.#.....#.#...#...#...#.....#.#.#...........#.............#.#.#.....#  
  #######.#.#####.#####.#.#.#.#####.#######.#.#.#.#####.#######.#.#.#.#####.#.#.###########.#####.#######.#.###.#.#  
  #.#.....#...#...#...#.#...#.#.#.......#...#...#...#...#...#.#.#.#...#.......#.....#.#.#.....#.#...#.........#.#.#  
  #.###.#.#.#######.###.#.#.###.#######.#######.###.###.#.###.#.#.#######.#######.###.#.###.###.#####.#####.#####.#  
  #.#...#.#.#.....#.....#.#...........#.#.#.#.#...#.....#.......#...#...#.....#.........................#.......#.#  
  #.#.###.#######.#.###.###.#######.###.#.#.#.#.#######.#.#########.#.#.#.#.#.#.#####.###########################.#  
  #.#.#.....#.....#.#.#.#.....#.#.......#.......#.......#.......#.....#.#.#.#.#.#...#.....#.........#.....#.#...#.#  
  #.#.###########.###.###.###.#.#.#######.#######.#########.#.#########.###.#.#.#.###.###.#.###.###.#.#####.#.###.#  
  #.......#.................#.#.......#.......#.........#...#.#.........#...#.#.....#.#.......#.#...............#.#  
  ###################################.#######.#######.#######.###.###########.#.#.#################################  
                                     B       R       M       P   K           G M Z                                   
                                     O       F       S       Q   D           Y T Z                                   ";
        #endregion

        internal class TeleportPoint
        {
            public TeleportPoint(char a, char b, int x, int y, Direction dir, bool isOuter)
            {
                Code = $"{a}{b}";
                Point = new Point(x, y);
                LandingPoint = Point.MoveDirection(dir);
                IsOuter = isOuter;
            }
            public readonly string Code;
            public Point Point;
            public Point LandingPoint;
            public bool IsOuter;

            public override string ToString()
            {
                return $"{Code} [{Point}]";
            }
        }

        internal class MazeMap : GridMapChar, ITraverseMap
        {
            public List<TeleportPoint> Teleports = new List<TeleportPoint>();
            public Point StartPoint;
            public Point EndPoint;
            public bool TrackLevels;
            public int MaxLevel = 15;

            public MazeMap(string input) : base(input)
            {
                int innerDistance = 2;
                while (this[innerDistance, innerDistance] != ' ')
                    innerDistance++;
                for (int x = 1; x < Width - 2; x++)
                {
                    if (char.IsLetter(this[x, 1]))
                        Teleports.Add(new TeleportPoint(this[x, 0], this[x, 1], x, 1, Direction.Down, true));
                    if (x > innerDistance && x < Width - innerDistance && char.IsLetter(this[x, innerDistance + 1]))
                        Teleports.Add(new TeleportPoint(this[x, innerDistance], this[x, innerDistance + 1], x, innerDistance, Direction.Up, false));

                    if (char.IsLetter(this[x, Height - 2]))
                        Teleports.Add(new TeleportPoint(this[x, Height - 2], this[x, Height - 1], x, Height - 2, Direction.Up, true));
                    if (x > innerDistance && x < Width - innerDistance && char.IsLetter(this[x, Height - innerDistance - 1]))
                        Teleports.Add(new TeleportPoint(this[x, Height - innerDistance - 2], this[x, Height - innerDistance - 1], x, Height - innerDistance - 1, Direction.Down, false));
                }
                for (int y = 1; y < Height - 2; y++)
                {
                    // left wall
                    if (char.IsLetter(this[1, y]))
                        Teleports.Add(new TeleportPoint(this[0, y], this[1, y], 1, y, Direction.Right, true));
                    // left wall inner
                    if (y > innerDistance && y < Height - innerDistance && char.IsLetter(this[innerDistance, y]))
                        Teleports.Add(new TeleportPoint(this[innerDistance, y], this[innerDistance + 1, y], innerDistance, y, Direction.Left, false));
                    // right wall
                    if (char.IsLetter(this[Width - 2, y]))
                        Teleports.Add(new TeleportPoint(this[Width - 2, y], this[Width - 1, y], Width - 2, y, Direction.Left, true));
                    // right wall inner
                    if (y > innerDistance && y < Height - innerDistance && char.IsLetter(this[Width - innerDistance - 1, y]))
                        Teleports.Add(new TeleportPoint(this[Width - innerDistance - 2, y], this[Width - innerDistance - 1, y], Width - innerDistance - 1, y, Direction.Right, false));
                }
                StartPoint = Teleports.Where(t => t.Code == "AA").Single().LandingPoint;
                EndPoint = Teleports.Where(t => t.Code == "ZZ").Single().LandingPoint;
#if DEBUG
                foreach (var t in Teleports)
                {
                    char c = this[t.LandingPoint];
                    if (c != '.') throw new NotSupportedException(t.Code);
                }
#endif
            }

            public override Point TranslatePoint(Point point, Direction dir)
            {
                int x = 0;
                return TranslatePoint(point, dir, ref x);
            }

            public Point TranslatePoint(Point point, Direction dir, ref int level)
            {
                Point next = point.MoveDirection(dir);
                char pointChar = this[next];
                if (char.IsLetter(pointChar))
                {
                    TeleportPoint teleport = Teleports.Single(t => t.Point == next);
                    if (TrackLevels)
                    {
                        if (!teleport.IsOuter && level >= MaxLevel) return next;
                        if (teleport.IsOuter && level <= 0) return next;
                        level += teleport.IsOuter ? -1 : 1;
                    }
                    if (teleport.Code != "AA" && teleport.Code != "ZZ")
                    {
                        TeleportPoint teleportOtherSide = Teleports.Single(t => t.Code == teleport.Code && t.Point != next);
                        return teleportOtherSide.LandingPoint;
                    }
                }
                return next;
            }

        }

        public class GridDistanceMapTrackLevels
        {
            List<GridDistanceMap> _LevelDistances = new List<GridDistanceMap>();

            public int DistanceTo(Point point)
            {
                return _LevelDistances[0][point];
            }

            public void CalculateCorridorDistance(MazeMap map, Point from)
            {
                CorridorDistance(map, from, 0, 0);
            }

            private void CorridorDistance(MazeMap map, Point from, int distance, int level)
            {
                if (level >= _LevelDistances.Count)
                    _LevelDistances.Add(new GridDistanceMap(map.Width, map.Height));
                if (from.X < 0 || from.Y < 0 || from.X >= map.Width || from.Y >= map.Height) return;

                if (!map.CanTraverseTo(from)) return;

                int index = from.Y * map.Width + from.X;
                if (_LevelDistances[level][index] > distance)
                {
                    _LevelDistances[level][index] = distance;
                    Move(map, from, distance, level, Direction.Left);
                    Move(map, from, distance, level, Direction.Right);
                    Move(map, from, distance, level, Direction.Up);
                    Move(map, from, distance, level, Direction.Down);
                }
            }

            private void Move(MazeMap map, Point from, int distance, int level, Direction dir)
            {
                int levelToPoint = level;
                Point next = map.TranslatePoint(from, dir, ref levelToPoint);
                CorridorDistance(map, next, distance + 1, levelToPoint);
            }

        }


        public MazeMap Map;

        public Day20(string input = Input)
        {
            Map = new MazeMap(input);
        }

        internal int Part1()
        {
            var DistanceMap = new GridDistanceMap(Map.Width, Map.Height);
            DistanceMap.CalculateCorridorDistance(Map, Map.EndPoint);
            return DistanceMap[Map.StartPoint];
        }

        internal int Part2()
        {
            Map.TrackLevels = true;
            while (true)
            {
                var DistanceMap = new GridDistanceMapTrackLevels();
                DistanceMap.CalculateCorridorDistance(Map, Map.EndPoint);
                int dist = DistanceMap.DistanceTo(Map.StartPoint);
                if (dist != int.MaxValue)
                    return dist;
                Map.MaxLevel++;
            }
        }

    }


    [TestClass]
    public class TestDay20
    {
        [TestMethod]
        public void Example1()
        {
            var d = new Day20(@"
         A           
         A           
  #######.#########  
  #######.........#  
  #######.#######.#  
  #######.#######.#  
  #######.#######.#  
  #####  B    ###.#  
BC...##  C    ###.#  
  ##.##       ###.#  
  ##...DE  F  ###.#  
  #####    G  ###.#  
  #########.#####.#  
DE..#######...###.#  
  #.#########.###.#  
FG..#########.....#  
  ###########.#####  
             Z       
             Z       ");
            Assert.AreEqual(23, d.Part1());
        }

        [TestMethod]
        public void Example2()
        {
            var d = new Day20(@"
                   A               
                   A               
  #################.#############  
  #.#...#...................#.#.#  
  #.#.#.###.###.###.#########.#.#  
  #.#.#.......#...#.....#.#.#...#  
  #.#########.###.#####.#.#.###.#  
  #.............#.#.....#.......#  
  ###.###########.###.#####.#.#.#  
  #.....#        A   C    #.#.#.#  
  #######        S   P    #####.#  
  #.#...#                 #......VT
  #.#.#.#                 #.#####  
  #...#.#               YN....#.#  
  #.###.#                 #####.#  
DI....#.#                 #.....#  
  #####.#                 #.###.#  
ZZ......#               QG....#..AS
  ###.###                 #######  
JO..#.#.#                 #.....#  
  #.#.#.#                 ###.#.#  
  #...#..DI             BU....#..LF
  #####.#                 #.#####  
YN......#               VT..#....QG
  #.###.#                 #.###.#  
  #.#...#                 #.....#  
  ###.###    J L     J    #.#.###  
  #.....#    O F     P    #.#...#  
  #.###.#####.#.#####.#####.###.#  
  #...#.#.#...#.....#.....#.#...#  
  #.#####.###.###.#.#.#########.#  
  #...#.#.....#...#.#.#.#.....#.#  
  #.###.#####.###.###.#.#.#######  
  #.#.........#...#.............#  
  #########.###.###.#############  
           B   J   C               
           U   P   P               ");
            Assert.AreEqual(58, d.Part1());
        }

        [TestMethod]
        public void Example3()
        {
            var d = new Day20(@"
             Z L X W       C                 
             Z P Q B       K                 
  ###########.#.#.#.#######.###############  
  #...#.......#.#.......#.#.......#.#.#...#  
  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  
  #.#...#.#.#...#.#.#...#...#...#.#.......#  
  #.###.#######.###.###.#.###.###.#.#######  
  #...#.......#.#...#...#.............#...#  
  #.#########.#######.#.#######.#######.###  
  #...#.#    F       R I       Z    #.#.#.#  
  #.###.#    D       E C       H    #.#.#.#  
  #.#...#                           #...#.#  
  #.###.#                           #.###.#  
  #.#....OA                       WB..#.#..ZH
  #.###.#                           #.#.#.#  
CJ......#                           #.....#  
  #######                           #######  
  #.#....CK                         #......IC
  #.###.#                           #.###.#  
  #.....#                           #...#.#  
  ###.###                           #.#.#.#  
XF....#.#                         RF..#.#.#  
  #####.#                           #######  
  #......CJ                       NM..#...#  
  ###.#.#                           #.###.#  
RE....#.#                           #......RF
  ###.###        X   X       L      #.#.#.#  
  #.....#        F   Q       P      #.#.#.#  
  ###.###########.###.#######.#########.###  
  #.....#...#.....#.......#...#.....#.#...#  
  #####.#.###.#######.#######.###.###.#.#.#  
  #.......#.......#.#.#.#.#...#...#...#.#.#  
  #####.###.#####.#.#.#.#.###.###.#.###.###  
  #.......#.....#.#...#...............#...#  
  #############.#.#.###.###################  
               A O F   N                     
               A A D   M                     ");
            Assert.AreEqual(396, d.Part2());
        }

        [TestMethod]
        public void Part1()
        {
            Assert.AreEqual(568, new Day20().Part1());
        }
        [TestMethod]
        public void Part2()
        {
            Assert.AreEqual(0, new Day20().Part2());
        }
    }

}
